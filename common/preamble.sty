\usepackage{classicthesis}

\titleformat{\chapter}[display]%
  {\relax}{\vspace*{-3\baselineskip}\makebox[\linewidth][r]{\color{halfgray}\chapterNumber\thechapter}}{0pt}%
  {\raggedright\spacedallcaps}[\normalsize\vspace*{.8\baselineskip}\titlerule]%

\newcommand{\sectionbreak}{\clearpage}

\usepackage[english]{babel}
\usepackage{mathtools,amsthm,amssymb,amsmath}

%\usepackage{fouriernc}
\usepackage{fourier}
\usepackage{hyperref}
\usepackage[capitalize]{cleveref}

\usepackage{subfiles}
\usepackage{tikz}

\usepackage{pythontex}
\setpythontexfv[]{numbers=left, frame=lines, label=\fbox{Python Code}, xleftmargin=5mm,framesep=2mm}

\usepackage{minted}
\setminted[python]{numbers=left, frame=lines, label=\fbox{Python Code}, xleftmargin=5mm,framesep=2mm,fontsize=\small, samepage=true}
%\setpythontexfv[]{numbers=left, frame=lines, label=\fbox{Python Code}, xleftmargin=5mm,framesep=2mm,fontsize=\small}
\setminted[R]{numbers=left, frame=lines, label=\fbox{R Code}, xleftmargin=5mm,framesep=2mm,fontsize=\small, samepage=true}


\usepackage{comment}
\usepackage{enumerate}
\usepackage{xr}


\numberwithin{equation}{section}


\opt{all-solutions-at-end}{
\usepackage{answers}
\Newassociation{solution}{Solution}{ans}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\textbf{h.#1.}}
\renewcommand{\Solutionlabel}[1]{\textbf{s.#1.}}
}

\opt{check}{
\usepackage[nosolutionfiles]{answers}
\Newassociation{solution}{Solution}{ans}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\emph{h.#1.}}
\renewcommand{\Solutionlabel}[1]{\emph{s.#1.}}
%\renewcommand{\Hintlabel}[1]{\textbf{h.#1.}}
%\renewcommand{\Solutionlabel}[1]{\textbf{s.#1.}}
%\AtEndEnvironment{exercise}{\clearpage} %  each exercise on a new page
% \BeforeBeginEnvironment{hint}{\clearpage} %  each exercise on a new page
% \BeforeBeginEnvironment{solution}{\clearpage} %  each exercise on a new page
%\AtBeginEnvironment{hint}{\clearpage} %  each exercise on a new page
%\AtEndEnvironment{exercise}{\clearpage} %  each exercise on a new page
}

\opt{justhints}{
\usepackage{answers}
\Newassociation{hint}{Hint}{hint}
\renewcommand{\Hintlabel}[1]{\textbf{h.#1.}}
\excludecomment{solution}
}

\opt{nosolutions}{
\excludecomment{hint}
\excludecomment{solution}
}


% I don't like slanted fonts in the exercises
\theoremstyle{definition}
% \newtheorem{theorem}{Theorem}[section]
% \newtheorem{exercise}{Ex}[section]
% \newtheorem{remark}{Remark}[section]
% \makeatletter
% \def\@endtheorem{~\newline \noindent\rule[8pt]{2.5cm}{0.4pt}\@endpefalse}
% \makeatother

% Don't set theorem counter here because that forces you to use the book or report style for all documents, and that is a pain.
% It's better to include the number scheme in the document themselves.
% \newtheorem{theorem}{Theorem} %[chapter]
% \newtheorem{exercise}[theorem]{Ex}
% \newtheorem{remark}[theorem]{Remark}
%+LaTeX_HEADER: \newtheorem{exercise}{Ex}[section]


\crefname{equation}{}{}
\crefformat{exercise}{[#2#1#3]}
\crefrangeformat{exercise}{[#3#1#4] to~[#5#2#6]}
\crefmultiformat{exercise}{[#2#1#3]}{ and~[#2#1#3]}{, [#2#1#3]}{ and~]#2#1#3]}
